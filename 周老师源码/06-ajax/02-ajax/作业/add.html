<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>添加学生</title>
	<style>
		.con {
			width: 400px;
			margin: 0 auto;
			/* border: 1px solid red; */
		}
	</style>
</head>

<body>
	<div class="con">
		<form action="" method="post">
			<p>
				<label for="class"> 班级：</label>
				<input type="text" name="clazz" id="class">
			</p>
			<p>
				<label for="name">姓名：</label>
				<input type="text" name="name" id="name">

			</p>
			<p>
				<label for="gender">性别：</label>
				男<input type="radio" name="gender" value="男" checked>
				女<input type="radio" name="gender" value="女">
			</p>
			<p>
				<label for="age">年龄：</label>
				<input type="text" name="age" id="age">
			</p>
			<p>
				<label for="hobby">爱好：</label>
				吃饭<input type="checkbox" name="hobby" value="吃饭">
				睡觉<input type="checkbox" name="hobby" value="睡觉">
				学习<input type="checkbox" name="hobby" value="学习">
			</p>
			<p>
				<label for="tel">
					手机号：</label><input type="text" name="tel" id="tel">
			</p>
			<p>
				<label for="address">
					地址：</label>
				<select name="address" id="">
					<option value="郑州">郑州</option>
					<option value="洛阳">洛阳</option>
					<option value="新乡">新乡</option>
				</select>
			</p>
			<p>
				<label for="remark">
					备注：</label>
				<textarea name="remark" id="remark" cols="30" rows="10"></textarea>
			</p>
			<p>
				<label for="date">入学时间：</label>
				<input type="date" name="date" id="date">
			</p>
			<p>
				<input type="submit" value="提交">
			</p>
			<p>
		</form>
	</div>
	<script src="utils.js"></script>
	<script>
		var form = document.querySelector('form'); //当前form表单
		form.onsubmit = function (e) {
			e.preventDefault(); //阻止当前表单提交

			// var data = serializeKeyValue(form); //表单的键值对
			var data = serializeJSON(form); // 表格生成 JSON数据

			var xhr = new XMLHttpRequest();
			xhr.onreadystatechange = function () {
				if (xhr.readyState == 4) {
					if (xhr.status >= 200 && xhr.status < 300 || xhr.status == 304) {
						window.location.href = 'index.html'
					}
				}
			}
			xhr.open('POST', 'http://localhost:3008/api/student/addStudent');
			xhr.setRequestHeader('Content-Type', 'application/json');
			// xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
			// xhr.send(data);
			xhr.send(JSON.stringify(data));
		}



	</script>
</body>

</html>